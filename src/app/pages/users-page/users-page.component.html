<form [formGroup]='userDetails' (ngSubmit)='Submit(userDetails)'>
    <fieldset class='form-sub-group'>
        <legend class="legend">User Details</legend>

        <div fxLayout='row' fxLayoutGap= '20px' fxLayout.lt-md="column" fxLayoutAlign='start center'>
            <mat-form-field>
                <input type= 'text' placeholder='First name' formControlName='userFirstName' matInput required>
            </mat-form-field>
            <mat-form-field>
                <input type= 'text' placeholder='Last name' formControlName='userSurname' matInput required>
            </mat-form-field>
            <mat-form-field>
                <span matPrefix>+91 &nbsp;</span>
                <input type= 'tel' placeholder='Phone number' formControlName= 'userTelephone' matInput required>
            </mat-form-field>
            <mat-form-field>
                <input type= 'text' placeholder='Initials' formControlName= 'userInitials' matInput required>
            </mat-form-field>
            
        </div>


        <div fxLayout='row' fxLayoutGap= '20px' fxLayout.lt-md="column" fxLayoutAlign='start center'>
            <mat-form-field>
                <input type='text' placeholder="Username" formControlName= 'userUserName' matInput required>
            </mat-form-field>
            <mat-form-field>
                <input [type]='hide?"password":"text"' placeholder="Password" formControlName= 'userPassword' matInput required>
                <mat-icon matSuffix style="cursor: pointer;" (click)="hide=!hide">{{hide ? 'visibility_off' : 'visibility'}}</mat-icon>
            </mat-form-field>

            <mat-form-field>
                <mat-label>Pick color</mat-label>
                <input type="color" formControlName='userColor' matInput>
            </mat-form-field>

            
        </div>


        <div fxLayout='row' fxLayoutGap= '20px' fxLayout.lt-md="column" fxLayoutAlign='start center'>

            <mat-slide-toggle style="margin-bottom: auto;" formControlName="isStreetTreatUser" (change)="changed()">StreetTreat user</mat-slide-toggle>

            <div fxLayout='row' fxLayoutGap= '20px' fxLayout.lt-md="column" fxLayoutAlign='start center' *ngIf="streetTreatdropdown">
                <mat-form-field appearance="fill">
                    <mat-label>-Team-</mat-label>
                    <mat-select formControlName= 'userTeamId'>
                        <mat-option *ngFor="let name of teamNames" [value]="name.TeamId">
                        {{name.TeamName}}
                        </mat-option>
                    </mat-select>
                </mat-form-field>
                <mat-form-field appearance="fill">
                    <mat-label>-StreetTreat role-</mat-label>
                    <mat-select formControlName='userRoleId'>
                        <mat-option *ngFor="let role of streettreatRoles" [value]="role.roleId">
                            {{role.roleName}}
                        </mat-option>
                    </mat-select>
                </mat-form-field>
            </div>
        </div>

        

        <div fxLayout='row' fxLayoutGap= '20px' style="margin-top: 20px;" fxLayout.lt-md="column" fxLayoutAlign='start center'>
            <mat-form-field appearance="fill">
                <mat-label>-User job type-</mat-label>
                <mat-select  formControlName= 'userJobTypeId' multiple  required>
                    <mat-option *ngFor='let jobType of jobTypes' [value]='jobType.JobTypeId'>
                        {{jobType.Title}}
                    </mat-option>
                </mat-select>
            </mat-form-field>

            <mat-slide-toggle formControlName='userIsDeleted'>IsDeleted</mat-slide-toggle>
        </div>

        <div fxLayout='row' fxLayoutGap= '10px' fxLayout.lt-md="column" fxLayoutAlign='start center'>
            <button type='submit' mat-raised-button color='primary'>Save</button>
            <button type='button' (click)="resetForm()" mat-raised-button color='primary'>Reset</button>
            <button type='button' mat-raised-button color='primary'>Delete</button>
        </div>
    </fieldset>
</form>


<mat-form-field class="filter">
    <mat-label>Filter<mat-icon>filter_alt</mat-icon></mat-label>
    
    <input matInput (keyup)="applyFilter($event)" #input>
</mat-form-field>

<div class="mat-elevation-z8">
    <table mat-table [dataSource]="dataSource" matSort>

        <ng-container matColumnDef="First Name">
            <th mat-header-cell *matHeaderCellDef mat-sort-header> First Name </th>
            <td mat-cell *matCellDef="let row"> {{row.firstName}} </td>
        </ng-container>

        <ng-container matColumnDef="Surname">
            <th mat-header-cell *matHeaderCellDef mat-sort-header> Last Name </th>
            <td mat-cell *matCellDef="let row"> {{row.surName}} </td>
        </ng-container>

        <ng-container matColumnDef="Initials">
            <th mat-header-cell *matHeaderCellDef mat-sort-header> Initials </th>
            <td mat-cell *matCellDef="let row"> {{row.initials}} </td>
        </ng-container>

        <ng-container matColumnDef="Colour">
            <th mat-header-cell *matHeaderCellDef mat-sort-header> Colour </th>
            <td mat-cell *matCellDef="let row"> {{row.colour}} </td>
        </ng-container>

        <ng-container matColumnDef="Telephone">
            <th mat-header-cell *matHeaderCellDef mat-sort-header> Phone Number </th>
            <td mat-cell *matCellDef="let row"> {{row.telephone}} </td>
        </ng-container>

        <ng-container matColumnDef="Username">
            <th mat-header-cell *matHeaderCellDef mat-sort-header> User Name </th>
            <td mat-cell *matCellDef="let row"> {{row.userName}} </td>
        </ng-container>

        <ng-container matColumnDef="Team">
            <th mat-header-cell *matHeaderCellDef mat-sort-header> Team </th>
            <td mat-cell *matCellDef="let row"> {{row.team}} </td>
        </ng-container>

        <ng-container matColumnDef="StreetTreat Role">
            <th mat-header-cell *matHeaderCellDef mat-sort-header> StreetTreat Role </th>
            <td mat-cell *matCellDef="let row"> {{row.role}} </td>
        </ng-container>

        <ng-container matColumnDef="Job Title">
            <th mat-header-cell *matHeaderCellDef mat-sort-header> Job Title </th>
            <td mat-cell *matCellDef="let row"> {{row.jobTitle}} </td>
        </ng-container>

        <ng-container matColumnDef="Is Deleted">
            <th mat-header-cell *matHeaderCellDef mat-sort-header> IsDeleted </th>
            <td mat-cell *matCellDef="let row"> {{row.isDeleted}} </td>
        </ng-container>

        <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
        <tr mat-row *matRowDef="let row; columns: displayedColumns;" (click)="selectRow(row)"></tr>
    </table>
    <mat-paginator [pageSizeOptions]="[10]" showFirstLastButtons></mat-paginator>
</div>





