<form [formGroup]='userDetails' (ngSubmit)='Submit(userDetails)'>

    <mat-spinner [diameter]="100" class="mat-spinner" *ngIf="loading"></mat-spinner>

    <fieldset class='form-sub-group'>
        <legend class="legend">User Details</legend>

        <div fxLayout='row' fxLayoutGap= '20px' fxLayout.lt-md="column" fxLayoutAlign='start center'>
            <mat-form-field>
                <input type= 'text' placeholder='First name' formControlName='firstName' matInput required>
            </mat-form-field>
            <mat-form-field>
                <input type= 'text' placeholder='Last name' formControlName='surName' matInput required>
            </mat-form-field>
            <mat-form-field>
                <span matPrefix>+91 &nbsp;</span>
                <input type= 'tel' placeholder='Phone number' formControlName= 'telephone' matInput>
            </mat-form-field>
            <mat-form-field>
                <input type= 'text' placeholder='Initials' formControlName= 'initials' matInput>
            </mat-form-field>

        </div>


        <div fxLayout='row' fxLayoutGap= '20px' fxLayout.lt-md="column" fxLayoutAlign='start center'>
            <mat-form-field>
                <input type='text' placeholder="Username" formControlName= 'userName' matInput required>
            </mat-form-field>
            <mat-form-field>
                <input [type]='hide?"password":"text"' placeholder="Password" formControlName= 'password' matInput>
                <mat-icon matSuffix style="cursor: pointer;" (click)="hide=!hide">{{hide ? 'visibility_off' : 'visibility'}}</mat-icon>
            </mat-form-field>

            <mat-form-field>
                <mat-label>Pick color</mat-label>
                <input type="color" formControlName='colour' matInput>
            </mat-form-field>


        </div>


        <div fxLayout='row' fxLayoutGap= '20px' fxLayout.lt-md="column" fxLayoutAlign='start center'>

            <mat-slide-toggle formControlName="isStreetTreatUser" (change)="changed()">StreetTreat user</mat-slide-toggle>

        </div>

        <div [@openCloseDiv]= streetTreatdropdown [@visibilityDiv]= streetTreatdropdown>

                <div class= "streetTreatUser" fxLayout='row' fxLayoutGap= '20px' fxLayout.lt-md="column" fxLayoutAlign='start center'>
                    <mat-form-field appearance="fill">
                        <mat-label>-Team-</mat-label>
                        <mat-select  formControlName= 'teamId'>
                            <mat-option *ngFor="let name of teamNames" [value]="name.TeamId">
                            {{name.TeamName}}
                            </mat-option>
                        </mat-select>
                    </mat-form-field>
                    <mat-form-field appearance="fill" >
                        <mat-label>-StreetTreat role-</mat-label>
                        <mat-select formControlName='roleId' >
                            <mat-option *ngFor="let role of streettreatRoles" [value]="role.roleId">
                                {{role.roleName}}
                            </mat-option>
                        </mat-select>
                    </mat-form-field>
                </div>

        </div>



        <div fxLayout='row' fxLayoutGap= '20px' fxLayout.lt-md="column" fxLayoutAlign='start center'>
            <mat-form-field style="padding-top: 20px;" appearance="fill">
                <mat-label>-User job type-</mat-label>
                <mat-select formControlName= 'jobTitleId' multiple>
                    <mat-option *ngFor='let jobType of jobTypes' [value]='jobType.JobTypeId'>
                        {{jobType.Title}}
                    </mat-option>
                </mat-select>
            </mat-form-field>
        </div>

        <div fxLayout='row' fxLayoutGap= '10px' fxLayout.lt-md="column" fxLayoutAlign='start center'>
            <button type='submit' mat-raised-button color='primary'>Save</button>
            <button type='button' mat-raised-button color='primary'>Delete</button>
            <button type='button' (click)="resetForm()" mat-raised-button color='white'>Reset</button>
        </div>
    </fieldset>
</form>


<mat-form-field class="filter">
    <mat-label>Filter<mat-icon>filter_alt</mat-icon></mat-label>
    <input matInput (keyup)="applyFilter($event)" #input>
</mat-form-field>

<div class="mat-elevation-z8">
    <table mat-table [dataSource]="dataSource" matSort
    class = "sortTableCursor">

        <ng-container matColumnDef="firstName">
            <th mat-header-cell *matHeaderCellDef mat-sort-header> First Name </th>
            <td mat-cell *matCellDef="let row"> {{row.firstName}} </td>
        </ng-container>

        <ng-container matColumnDef="surName">
            <th mat-header-cell *matHeaderCellDef mat-sort-header> Last Name </th>
            <td mat-cell *matCellDef="let row"> {{row.surName}} </td>
        </ng-container>

        <ng-container matColumnDef="initials">
            <th mat-header-cell *matHeaderCellDef mat-sort-header> Initials </th>
            <td mat-cell *matCellDef="let row"> {{row.initials}} </td>
        </ng-container>

        <ng-container matColumnDef="colour">
            <th mat-header-cell *matHeaderCellDef mat-sort-header> Colour </th>
            <td mat-cell *matCellDef="let row"> {{row.colour}} </td>
        </ng-container>

        <ng-container matColumnDef="telephone">
            <th mat-header-cell *matHeaderCellDef mat-sort-header> Phone Number </th>
            <td mat-cell *matCellDef="let row"> {{row.telephone}} </td>
        </ng-container>

        <ng-container matColumnDef="userName">
            <th mat-header-cell *matHeaderCellDef mat-sort-header> User Name </th>
            <td mat-cell *matCellDef="let row"> {{row.userName}} </td>
        </ng-container>

        <ng-container matColumnDef="team">
            <th mat-header-cell *matHeaderCellDef mat-sort-header> Team </th>
            <td mat-cell *matCellDef="let row"> {{row.team}} </td>
        </ng-container>

        <ng-container matColumnDef="role">
            <th mat-header-cell *matHeaderCellDef mat-sort-header> StreetTreat Role </th>
            <td mat-cell *matCellDef="let row"> {{row.role}} </td>
        </ng-container>

        <ng-container matColumnDef="jobTitle">
            <th mat-header-cell *matHeaderCellDef mat-sort-header> Job Title </th>
            <td mat-cell *matCellDef="let row"> {{row.jobTitle}} </td>
        </ng-container>

        <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
        <tr mat-row *matRowDef="let row; columns: displayedColumns;" (click)="selectRow(row)"></tr>
    </table>
    <mat-paginator [pageSizeOptions]="[10]" showFirstLastButtons></mat-paginator>
</div>







