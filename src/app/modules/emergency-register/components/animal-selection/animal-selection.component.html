<fieldset [formGroup]="patients"class="form-sub-group" fxLayout="column" >
    <legend class="legend">Patient details</legend>
    
        <div fxFlex formArrayName="patientArray" *ngFor="let patient of patientArray.controls; let patientIndex = index">
            <app-emergency-register-patient
                [patientForm]="patient"
                [patientIndex]="patientIndex"
                (patientDeleted)="deletePatient($event)"
            ></app-emergency-register-patient>
            <!-- 
                   <ng-container matColumnDef="tagNo">
                            <th mat-header-cell *matHeaderCellDef> Tag number </th>
                            <td mat-cell *matCellDef="let row"
                            (click)="selectIfNotSelected(row); updateTag(row)"
                            [class.invalid-cell]="(recordForm.get('callOutcome.CallOutcome')?.value?.CallOutcomeId === 1 || recordForm.get('callOutcome.CallOutcome')?.value?.CallOutcomeId === 18 ) && !row.get('tagNumber')?.value"
                            [ngClass]="{
                                duplicate: row.get('duplicateTag')?.value == 'INVALID',
                                pending: row.get('duplicateTag')?.value == 'PENDING'
                            }"
                            style="cursor:pointer">
                                {{patient.get("tagNumber")?.value}}
                                <p style="color:red" *ngIf="(recordForm.get('callOutcome.CallOutcome')?.value?.CallOutcomeId === 1 || recordForm.get('callOutcome.CallOutcome')?.value?.CallOutcomeId === 18 )&& !patient.get('tagNumber')?.value">  Tag number</p>
                            </td>
                    </ng-container>
                    <ng-container matColumnDef="media">
                        <th mat-header-cell *matHeaderCellDef fxHide.lt-md>Media</th>
                        <td mat-cell *matCellDef="let row">
                        (click)="selectIfNotSelected(patient); openMediaDialog(patient)"
                
                            <mat-icon style="cursor:pointer; padding-left: 10px">add_photo_alternate</mat-icon>
                        </td>
                    </ng-container>
                   <ng-container matColumnDef="print">
                        <th mat-header-cell *matHeaderCellDef fxHide.lt-md>Print card</th>
                        <td mat-cell *matCellDef="let row">
                            (click)="selectIfNotSelected(patient); printEmergencyCard(patient)"
                            <mat-icon
                                style="cursor:pointer; padding-left: 10px"
                                >print</mat-icon
                            >
                        </td>
                    </ng-container>
                    <ng-container matColumnDef="delete">
                       <th mat-header-cell *matHeaderCellDef fxHide.lt-md>Delete</th>
                        <td mat-cell *matCellDef="let row">
                            (click)="deletePatientRow(patient)"
                        (click)="deletePatientRow(patient)"
                            <mat-icon
                                *ngIf="!patient.get('deleted')?.value"
                                style="cursor:pointer"
                                >delete
                            </mat-icon>
                            <mat-icon
                                *ngIf="patient.get('deleted')?.value"
                                style="cursor:pointer"
                                >undo
                            </mat-icon>
                      </td>
                   </ng-container>
                  <tr
                        mat-header-row
                        *matHeaderRowDef="patientArrayDisplayedColumns"
                    ></tr>
                    <tr
                        (click)="toggleRow(row)"
                        [class.patientSelected]="selection.isSelected(row)"
                        mat-row
                        *matRowDef="let row; columns: patientArrayDisplayedColumns; let i = index"
                        [class.deleted]="row.get('deleted')?.value"
                        [class.invalid-row]="row.invalid"
                    ></tr>
                           </table> 
            </ng-container> -->
        </div>
    <!-- <div fxLayout="row-reverse">
        <button
            #addPatientBtn
            class="addCallerButton"
            type="button"
            (click)="addPatientRow()"
            mat-mini-fab
            color="primary"
        >
            <mat-icon>add</mat-icon>
        </button>
    </div> -->
</fieldset>
