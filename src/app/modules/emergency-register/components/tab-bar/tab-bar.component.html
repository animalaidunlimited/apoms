<div class="emergencyWrapper"> 
        
        <mat-tab-group mat-stretch-tabs="false" mat-align-tabs="start" [selectedIndex]="selected.value" (selectedIndexChange)="tabChanged($event)">

                <mat-tab *ngFor="let tab of tabs; let index = index"
                class="emergency-tab"
                style="flex-grow: 0 !important;"> 

                        <ng-template mat-tab-label>
                        {{tab.value}}
                        <mat-icon style="pointer-events: auto;" *ngIf="index > 1" (click)="removeTab(index)">{{tab.icon}}</mat-icon>
                        </ng-template>                        

                <mat-tab-group [selectedIndex]="selected.value" (selectedIndexChange)="tabChanged($event)">

                        <mat-tab *ngFor="let tab of tabs; let index = index"
                        class="emergency-tab"
                        style="flex-grow: 0 !important;"
                        label="tab">
        
                                <ng-template mat-tab-label>
                                {{tab.value}}
                                <mat-icon *ngIf="index > 1" (click)="removeTab(index)">{{tab.icon}}</mat-icon>
                                </ng-template>
        
                                <outstanding-case-board *ngIf="index == 0 && loadBoard"  class="tab-icon"></outstanding-case-board>
        
                                <record-search *ngIf="index == 1" source="emergencyRegister" class="tab-icon"></record-search>
        
                                <emergency-record *ngIf="index > 1" [guId]= "tab.GUID" [emergencyCaseId]="tab.emergencyCaseId"
                                (loadEmergencyNumber)="updateEmergencyNumber($event)"
                                 class="tab-icon">
                                </emergency-record>
        
                        </mat-tab>
        
                        <!-- TODO: Fix the positioning of the icon to the middle of the tab. It's off to the right at the moment -->
                        <mat-tab>
                        <ng-template mat-tab-label>
                        {{tab.value}}
                        <mat-icon style="pointer-events: auto;" *ngIf="index > 1" (click)="removeTab(index)">{{tab.icon}}</mat-icon>
                        </ng-template> 

                        <emergency-record *ngIf="index > 1" [guId]= "tab.GUID" [emergencyCaseId]="tab.emergencyCaseId"
                        (loadEmergencyNumber)="updateEmergencyNumber($event)"
                                class="tab-icon">
                        </emergency-record>

                </mat-tab>

                <mat-tab disabled>
                        <ng-template mat-tab-label >                                
                                <mat-icon style="pointer-events: all; cursor: pointer;" (click)="addTab(0,'New Case*')" color="primary">add_circle</mat-icon>
                        </ng-template>
                </mat-tab>  

        </mat-tab-group> 

        <div class="hotkeys" >
                <button mat-icon-button (click)="openShortcutsDialog($event,selected.value || -1)">
                        <mat-icon color="primary">help_outline</mat-icon>
                </button>
        </div>
</div>



