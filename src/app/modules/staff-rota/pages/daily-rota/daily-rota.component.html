
  <div fxLayout="row" fxLayoutAlign="start center" [formGroup]="areaForm">

    <mat-form-field appearance="fill">
      <mat-label>Areas</mat-label>
      <mat-select formControlName="areas" multiple (selectionChange)="loadRotaDays()">
        <mat-option *ngFor="let area of areas" [value]="area.rotationAreaId">{{area.rotationArea}}</mat-option>
      </mat-select>
    </mat-form-field>

    <button mat-icon-button color="primary" (click)="areaSelected()" matTooltip="Save areas to preferences">
      <mat-icon>save</mat-icon>
    </button>
  
  
  </div>

<mat-tab-group >
  <mat-tab *ngFor="let day of rotaDayForm.controls" [label]="day.get('rotaDayDate')?.value">      

    <app-daily-rota-day [inputRotaDayAssignments]="day.get('rotaDayAssignments')"></app-daily-rota-day>
  
  </mat-tab>
</mat-tab-group>


<!-- <mat-tab-group >
    <mat-tab *ngFor="let day of (rotaDays | async)" [label]="day.rotaDayDate.toString()"> 
      
    
      <table mat-table [dataSource]="day.rotaDayAssignments" class="day-rota-table">
      
        <ng-container matColumnDef="rotationArea">
          <th mat-header-cell *matHeaderCellDef></th>
          <td mat-cell *matCellDef="let element"
          class="area-header"
          [attr.rowspan]="element.areaRowSpan"
          [style.display]="element.areaRowSpan !== 0  ? '' : 'none'"
          [ngStyle]="{backgroundColor: element.rotationAreaColour}"
          > {{element.rotationArea}} </td>
        </ng-container>
      
        <ng-container matColumnDef="rotationRole">
          <th mat-header-cell *matHeaderCellDef> Rotation Role </th>
          <td mat-cell *matCellDef="let element"> {{element.rotationRole}} </td>
        </ng-container>
      
        <ng-container matColumnDef="userId">
          <th mat-header-cell *matHeaderCellDef> Who </th>
          <td mat-cell *matCellDef="let element"> 
          
            <div>

              
              <input matInput
              (focus)="setFilteredUsers(period, assignedUser)"                          
              type="text"
              class="user-input"                        
              [matAutocomplete]="auto">

              <mat-autocomplete #auto="matAutocomplete" [displayWith]="displayFn"
              (optionSelected)="userSelectedForShift(period, element.get('areaShift')?.get('areaShiftGUID')?.value, assignedUser)"
                      >
                <mat-option>N/A</mat-option>
                <mat-option *ngFor="let user of (filteredUsers | async)" [value]="user">
                  {{ user.employeeNumber + ' - ' + user.firstName }}
                </mat-option>
              </mat-autocomplete>

            </div>
          
          </td>
        </ng-container>
      
        <ng-container matColumnDef="plannedStartTime">
          <th mat-header-cell *matHeaderCellDef> Start time </th>
          <td mat-cell *matCellDef="let element"> {{element.plannedShiftStartTime}} </td>
        </ng-container>
      
        <ng-container matColumnDef="plannedEndTime">
          <th mat-header-cell *matHeaderCellDef> End time </th>
          <td mat-cell *matCellDef="let element"> {{element.plannedShiftEndTime}} </td>
        </ng-container>
      
        <ng-container matColumnDef="actualStartTime">
          <th mat-header-cell *matHeaderCellDef> Start time </th>
          <td mat-cell *matCellDef="let element"> {{element.actualShiftStartTime}} </td>
        </ng-container>
      
        <ng-container matColumnDef="actualEndTime">
          <th mat-header-cell *matHeaderCellDef> End time </th>
          <td mat-cell *matCellDef="let element"> {{element.actualShiftEndTime}} </td>
        </ng-container>
      
        <ng-container matColumnDef="notes">
          <th mat-header-cell *matHeaderCellDef> Notes </th>
          <td mat-cell *matCellDef="let element">  </td>
        </ng-container>
      
        <tr mat-header-row *matHeaderRowDef="displayedColumns sticky: true;"></tr>
        <tr mat-row *matRowDef="let row; columns: displayedColumns;"></tr>
      </table>
      
    
    </mat-tab>
</mat-tab-group> -->